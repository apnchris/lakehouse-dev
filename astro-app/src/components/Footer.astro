---
import { sanityClient } from "sanity:client";
import groq from "groq";

const siteSettings = await sanityClient.fetch(
  groq`*[_type == "siteSettings"][0]{ getInTouchEmail }`
);
---

<footer>
  <menu class="regular-grid">
    {siteSettings?.getInTouchEmail && (
      <li class="header-element header-contact hide-desktop">
        <button
          type="button"
          class="header-contact-btn back-hover"
          data-email={siteSettings.getInTouchEmail}
        >
          Get in Touch
        </button>
      </li>
    )}

    <li class="current-location hide-mobile">
      New York, NY
      <span class="current-time sans uppercase"></span>
    </li>
    
    <li class="current-date hide-mobile">
      {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
    </li>
  </menu>
</footer>

<script>
  function updateClock() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('en-US', {
      timeZone: 'America/New_York',
      hour: 'numeric',
      minute: '2-digit',
      second: '2-digit',
      hour12: true
    });
    
    const timeElement = document.querySelector('.current-time');
    if (timeElement) {
      timeElement.textContent = timeString;
    }
  }

  updateClock();
  setInterval(updateClock, 1000);
</script>

<style>
  .header-contact-btn {
    all: unset;
    cursor: pointer;
    font: inherit;
    color: inherit;
    position: relative;
  }
</style>